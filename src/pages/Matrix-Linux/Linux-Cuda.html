<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link
      rel="icon"
      type="image/x-icon"
      href="../../../images/icons/favicon-H.ico"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="../../scripts/namaz-timing.js" defer></script>

    <link rel="stylesheet" href="../../styles/Matrix-Style.css" />
    <script src="../../scripts/footer.js" defer></script>
    <script src="../../scripts/menu.js" defer></script>
    <title>Osama Using GNU/Linux</title>
  </head>
  <body>
    <canvas id="Matrix"></canvas>
    <script src="../../scripts/Matrix-Script.js"></script>
    <main>
      <header>
        <h1>0sama's Website!</h1>
        <div>
          <img
            src="../../../images/Backgrounds/GNU-vs.-GNULinux.png"
            alt="GNU/Linux"
            style="
              width: 40%;
              margin-bottom: -9%;
              margin-left: 30%;
              object-fit: fill;
            "
          />
        </div>
      </header>
      <div class="flexposition">
        <div class="MainNoticeBoard">
          <section>
            <h2 class="h1alt">Setting Up CUDA on Arch Linux for GTX 750 Ti</h2>
          </section>

          <div class="maintopics">
            <h2 class="linuxboxitems">CUDA and GTX 750 Ti</h2>
          </div>
          <p>
            FUCK THE COMPLECATED MESS THAT IS CUDA ESPECIALLY WHEN DEALING WITH
            OLDER GPU'S!!!!!!!! SO I WRITE THIS TO HELP MESELF NOT FORGET THESE
            THINGS!!!
          </p>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 1: Installing the NVIDIA Proprietary Drivers
              </h2>
            </div>
            <p>
              The first step is to install the
              <strong>NVIDIA proprietary driver</strong>, which is required for
              CUDA to function properly. For
              <a
                style="color: rgb(0, 255, 0)"
                href="https://nouveau.freedesktop.org/CodeNames.html#NV110"
                >Maxwell-based</a
              >
              GPUs like the GTX 750 Ti, use the
              <span style="color: rgb(0, 255, 0)">nvidia</span> package:
            </p>
            <ul>
              <li>
                Go to the
                <a
                  style="color: rgb(0, 255, 0)"
                  href="https://wiki.archlinux.org/title/NVIDIA"
                  >Arch Wiki</a
                >
                to follow the instructions for installing the correct drivers.
              </li>
              <li>
                Install the NVIDIA driver with
                <code>sudo pacman -S nvidia</code>.
              </li>
              <li>
                If you're using the LTS kernel, use
                <code>sudo pacman -S nvidia-lts</code>.
              </li>
              <li>
                For kernel compatibility, install
                <code>sudo pacman -S nvidia-dkms</code>.
              </li>
            </ul>
          </section>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">Step 2: Install CUDA 10.1</h2>
            </div>
            <p>
              Once the drivers are installed, we can proceed with installing
              <strong>CUDA 10.1</strong>. CUDA 10.1 is the
              <a
                style="color: rgb(0, 255, 0)"
                href="https://gist.github.com/standaloneSA/99788f30466516dbcc00338b36ad5acf"
                >latest version</a
              >
              supported by the GTX 750 Ti which has Compute Capability of 5.0.
              We need to install cuda and cuDNN. You have two main methods of
              installation:
            </p>
            <ol>
              <li>
                <span class="textW">Install CUDA from the NVIDIA website.</span>
              </li>
              <li>
                <span class="textW"
                  >Install an older version of CUDA using Arch Linux
                  Archive.</span
                >
              </li>
            </ol>

            <h3>Method 1: Install CUDA from NVIDIA's Website</h3>
            <p>
              - Note: These steps are takken from
              <a
                style="color: rgb(0, 255, 0)"
                href="https://bbs.archlinux.org/viewtopic.php?id=237141"
                >Here!</a
              >
            </p>
            <ol>
              <li>
                <strong>Install CUDA:</strong>
                <ol>
                  <li>
                    Go to the
                    <a
                      style="color: rgb(0, 255, 0)"
                      href="https://developer.nvidia.com/cuda-toolkit-archive"
                      >NVIDIA CUDA Downloads</a
                    >
                    page and select:
                  </li>
                  <ul>
                    <li><strong>Linux</strong></li>
                    <li><strong>x86_64</strong></li>
                    <li>
                      <strong>Ubuntu</strong> (choose the latest version) ->
                      <strong>runfile (local)</strong>.
                    </li>
                  </ul>
                  <li>
                    Copy the provided <code>wget</code> command and execute it
                    in the terminal:
                  </li>
                  <pre><code>wget https://developer.download.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.243_418.87.00_linux.run</code></pre>
                  <li>Run the installer:</li>
                  <pre><code>chmod +x cuda_10.1.243_418.87.00_linux.run</code></pre>
                  <pre><code>sudo ./cuda_10.1.243_418.87.00_linux.run</code></pre>
                  <li>
                    Skip the driver installation since itâ€™s already done via
                    <code>pacman</code>.
                  </li>
                  <li>
                    Set the environment paths in <strong>`~/.bashrc`</strong>:
                  </li>
                  <pre><code>export PATH=/usr/local/cuda-10.1/bin:$PATH</code></pre>
                  <pre><code>export LD_LIBRARY_PATH=/usr/local/cuda-10.1/lib64:$LD_LIBRARY_PATH</code></pre>
                  <li>Reload <strong>`~/.bashrc`</strong>:</li>
                  <pre><code>source ~/.bashrc</code></pre>
                </ol>
              </li>

              <li>
                <strong>Install cuDNN:</strong>
                <ol>
                  <li>
                    Go to the
                    <a
                      style="color: rgb(0, 255, 0)"
                      href="https://developer.nvidia.com/rdp/cudnn-archive#a-collapse897-120"
                      >NVIDIA cuDNN Downloads</a
                    >
                    page and select:
                  </li>
                  <ul>
                    <li>
                      <strong
                        >Download cuDNN v8.0.5 (November 9th, 2020), for CUDA
                        10.1</strong
                      >
                    </li>
                    <li><strong>cuDNN Library for Linux (x86)</strong></li>
                  </ul>
                  <li>
                    Follow the installation instructions on the page or extract
                    and copy files manually to the CUDA installation
                    directories.
                  </li>
                </ol>
              </li>
            </ol>
            <h3>Method 2: Install CUDA via Arch Linux Archive</h3>
            <p>
              - These steps are taken from this
              <a
                style="color: rgb(0, 255, 0)"
                href="https://superuser.com/questions/1784504/how-do-i-get-cuda-11-7-on-arch-linux"
                >Here.</a
              >
            </p>
            <ol>
              <li>
                Download the required CUDA packages from the Arch Linux Archive:
              </li>
              <ol>
                <li>
                  <a
                    style="color: rgb(0, 255, 0)"
                    href="https://archive.archlinux.org/packages/c/cuda/"
                    >Select cuda-10.1.243-2-x86_64.pkg.tar.xz</a
                  >
                </li>
                <li>
                  <a
                    style="color: rgb(0, 255, 0)"
                    href="https://archive.archlinux.org/packages/c/cudnn/"
                    >Select cudnn-8.0.5.39-1-x86_64.pkg.tar.zst</a
                  >
                </li>
              </ol>
              <pre><code>sudo pacman -U https://archive.archlinux.org/packages/c/cuda/cuda-10.1.243-1-x86_64.pkg.tar.xz</code></pre>
              <pre><code>sudo pacman -U https://archive.archlinux.org/packages/c/cudnn/cudnn-8.0.5-1-x86_64.pkg.tar.xz</code></pre>
            </ol>
          </section>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 3: Install Python 3.7 for TensorFlow
              </h2>
            </div>
            <p>
              TensorFlow 2.1.0 is compatible with CUDA 10.1, but it
              <a
                style="color: rgb(0, 255, 0)"
                href="https://pypi.org/project/tensorflow-gpu/2.1.0/"
                >requires</a
              >
              Python 3.7. To install Python 3.7 on Arch Linux:
            </p>
            <ul>
              <li>
                Install Python 3.7 from the
                <a
                  style="color: rgb(0, 255, 0)"
                  href="https://aur.archlinux.org/packages/python37"
                  >AUR:</a
                >
                <code>yay -S python37</code>
              </li>
              <li>Create a virtual environment:</li>
              <pre><code>python3.7 -m venv tf_env</code></pre>
              <pre><code>source tf_env/bin/activate</code></pre>
              <li>Install TensorFlow GPU 2.1.0:</li>
              <pre><code>pip install tensorflow-gpu==2.1.0</code></pre>
              <li>
                Also, install the required version of <strong>protobuf</strong>:
              </li>
              <pre><code>pip uninstall protobuf</code></pre>
              <pre><code>pip install protobuf==3.20.*</code></pre>
            </ul>
          </section>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 4: Install TensorRT for Deep Learning Inference.
              </h2>
            </div>
            <p>
              - These steps are taken from this
              <a
                style="color: rgb(0, 255, 0)"
                href="https://blog.devgenius.io/a-comprehensive-guide-to-installing-cuda-cudnn-and-tensorrt-on-linux-4bc6bda7cdb6"
                >blog guide.</a
              >
            </p>
            <p>
              - TensorRT 6 is
              <a
                style="color: rgb(0, 255, 0)"
                href="https://docs.nvidia.com/deeplearning/tensorrt/archives/tensorrt-910/release-notes/index.html#rel_6-0-1"
                >required </a
              >for deep learning inference on CUDA 10.1. To install it:
            </p>
            <ol>
              <li>
                Go to the
                <a
                  style="color: rgb(0, 255, 0)"
                  href="https://developer.nvidia.com/tensorrt/download"
                  >TensorRT download page.</a
                >
              </li>
              <li>
                Select <strong>"TensorRT 6"</strong> and fill out the stupid
                survey.
              </li>
              <li>
                Download the latest Ubuntu (NOT .deb the tar one) package from
                cuda 10.1.
              </li>
              <li>Then do the following:</li>
              <ol>
                <pre><code>tar -xvf TensorRT-6.0.1.5.Ubuntu-18.04.x86_64-gnu.cuda-10.1.cudnn7.6.tar.gz</code></pre>
                <pre><code>cp -r TensorRT-6.0.1.5.Ubuntu-18.04.x86_64-gnu.cuda-10.1.cudnn7.6/TensorRT-6.0.1.5 ~</code></pre>
              </ol>
              <li>
                Then go to your home dir and open
                <strong
                  >"TensorRT-6.0.1.5/doc/pdf/TensorRT-Installation-Guide.pdf"</strong
                >
              </li>
              <li>
                Follow the <strong>tar installation</strong> also consult the
                blog guide as well.
              </li>
            </ol>
          </section>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 5: Install g++-8 for CUDA Compilation
              </h2>
            </div>
            <p>
              To compile CUDA programs, you need <strong>g++-8</strong>, as
              newer versions may not be compatible with CUDA 10.1:
            </p>
            <ul>
              <li>
                Install
                <strong
                  ><a
                    style="color: rgb(0, 255, 0)"
                    href="https://wiki.archlinux.org/title/GNU_Compiler_Collection"
                    >g++-8:</a
                  ></strong
                >
                <code> yay -S g++-8</code>
              </li>
            </ul>
          </section>

          <section class="Explain">
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 6: Patch the "math_functions.h" File
              </h2>
            </div>
            <p>
              Recently a
              <a
                style="color: rgb(0, 255, 0)"
                href="https://github.com/opencv/opencv/issues/27111"
                >bug</a
              >
              in nvidia's <strong>"math_functions.h"</strong> which made it
              impossible to compile cuda programs.
            </p>
            <ul>
              <li>
                Navigate to
                <strong style="color: white"
                  >"/usr/local/cuda/include/math_functions.h"</strong
                >
                and follow the patch instructions provided here:
                <a
                  style="color: rgb(0, 255, 0)"
                  href="https://forums.developer.nvidia.com/t/error-exception-specification-is-incompatible-for-cospi-sinpi-cospif-sinpif-with-glibc-2-41/323591/3"
                  >NVIDIA forum thread</a
                >.
              </li>
            </ul>
          </section>

          <section>
            <div class="maintopics">
              <h2 class="linuxboxitems">
                Step 7: Reboot and Verify Installation
              </h2>
            </div>
            <p>
              Once everything is installed, reboot your system just because. Now
              using that virtual environment that you created use ChatGPT to
              write a python program to test GPU and tensorflow-gpu. It SHOULD
              WORK!!!!!
            </p>
          </section>

          <section>
            <div class="maintopics">
              <h2 class="linuxboxitems">Conclusion</h2>
            </div>
            <p>There are the things we did:</p>
            <ol>
              <li>
                <div style="color: white">nvidia driver from arch package</div>
              </li>
              <li>
                <div style="color: white">CUDA 10.1 and cuDNN v8.0.5</div>
              </li>
              <li><div style="color: white">python 3.7</div></li>
              <li>
                <div style="color: white">
                  pip install tensorflow-gpu==2.1.0
                </div>
              </li>
              <li>
                <div style="color: white">pip install protobuf==3.20.*</div>
              </li>
              <li><div style="color: white">TensorRT 6</div></li>
              <li><div style="color: white">g++-8</div></li>
              <li>
                <div style="color: white">
                  Patching /usr/local/cuda/include/math_functions.h
                </div>
              </li>
            </ol>
          </section>
        </div>

        <div class="menu"></div>
      </div>
    </main>
    <footer></footer>
  </body>
</html>
